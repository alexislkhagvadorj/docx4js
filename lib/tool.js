'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var isNode = false;
try {
	isNode = Object.prototype.toString.call(global.process) === '[object process]';
} catch (e) {}

function makeTool(xmlParser, Document, Node, NodeList, scopable) {
	var $tool = {
		isNode: isNode,
		parseXML: xmlParser,
		extend: Object.assign,
		isFunction: function isFunction(a) {
			return typeof a === 'function';
		},
		isArray: function isArray(a) {
			return Array.isArray(a);
		},
		each: function each(a, f, ctx) {
			if (Array.isArray(a)) {
				a.forEach(f, ctx);
			} else if ((typeof a === 'undefined' ? 'undefined' : _typeof(a)) === 'object') {
				Object.keys(a).forEach(function (k) {
					f.call(ctx, k, a[k]);
				});
			}
		},
		map: function map(a, f, ctx) {
			return a.map(f, ctx);
		}
	};

	$tool.extend($tool, {
		toArray: function toArray(args) {
			var a = [];
			for (var i = 0, len = args.length; i < len; i++) {
				a.push(args[i]);
			}return a;
		}
	});

	var directChildSelector = /((^|,)\s*>)/,
	    id = "sxxx";
	$tool.extend(Node.prototype, {
		$: function $(selector) {
			if (!directChildSelector.test(selector)) return this.querySelectorAll(selector);else if (scopable) return this.querySelectorAll(selector.split(',').map(function (a) {
				return a.trim().charAt(0) == '>' ? ':scope' + a : a;
			}).join(','));else if (this.id) {
				return this.querySelectorAll(selector.split(',').map(function (a) {
					//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a
					return (a = a.trim()).charAt(0) == '>' ? a.substring(1) : a;
				}, this).join(','));
			} else {
				this.id = id;
				var nodes = this.querySelectorAll(selector.split(',').map(function (a) {
					//IE can't find '#xx', @todo: fix it later
					//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a
					return (a = a.trim()).charAt(0) == '>' ? a.substring(1) : a;
				}, this).join(','));
				delete this.id;
				return nodes;
			}
		},
		$1: function $1(selector) {
			if (!directChildSelector.test(selector)) return this.querySelector(selector);else if (scopable) return this.querySelector(selector.split(',').map(function (a) {
				return (a = a.trim()).charAt(0) == '>' ? ':scope' + a : a;
			}).join(','));else if (this.id) {
				return this.querySelector(selector.split(',').map(function (a) {
					//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a
					return (a = a.trim()).charAt(0) == '>' ? a.substring(1) : a;
				}, this).join(','));
			} else {
				this.id = id;
				var nodes = this.querySelector(selector.split(',').map(function (a) {
					//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a
					return (a = a.trim()).charAt(0) == '>' ? a.substring(1) : a;
				}, this).join(','));
				delete this.id;
				return nodes;
			}
		},
		attr: function attr(name, value) {
			if (arguments.length == 1) {
				var attr = this.attributes.getNamedItem(name);
				return attr ? attr.value : undefined;
			} else if (value == null) this.removeAttribute(name);else this.setAttribute(name, value);
		},
		remove: Node.prototype.remove || function () {
			this.parentNode.removeChild(this);
		},
		uptrim: function uptrim() {
			var parent = this.parentNode;
			this.remove();
			if (parent.childNodes.length == 0) parent.uptrim();
		}
	});

	$tool.extend(NodeList.prototype, {
		asArray: function asArray(o) {
			o = o || [];
			for (var i = 0, len = this.length; i < len; i++) {
				o.push(this[i]);
			}return o;
		},
		forEach: Array.prototype.forEach,
		map: Array.prototype.map
	});

	return $tool;
}

if (!isNode) {
	window.$tool = makeTool.apply(undefined, _toConsumableArray(function () {
		function parser(x) {
			x = x.trim();
			if (typeof DOMParser != 'undefined') return new DOMParser().parseFromString(x, "text/xml");

			var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
			xmlDoc.async = "false";
			xmlDoc.loadXML(x);
			return xmlDoc;
		}

		function supportScopeSelector() {
			try {
				return document.body.querySelector(':scope>*').length != 0;
			} catch (e) {
				return false;
			}
		}
		document.$1 = document.querySelector;
		document.$ = document.querySelectorAll;
		return [parser, Document, Element, NodeList, supportScopeSelector()];
	}()));
} else {
	global.$tool = makeTool.apply(undefined, _toConsumableArray(function (xmldom) {
		var DOMParser = xmldom.DOMParser,
		    DOMImplementation = xmldom.DOMImplementation;

		var nwmatcher = require("nwmatcher");

		function parse(x) {
			return new DOMParser().parseFromString(x, "text/xml");
		}

		function addNwmatcher(document) {
			if (!document._nwmatcher) {
				document._nwmatcher = nwmatcher({ document: document });
				document._nwmatcher.configure({ UNIQUE_ID: false });
			}
			return document._nwmatcher;
		}

		var a = parse('<a></a>'),
		    Document = a.constructor,
		    Element = a.documentElement.constructor,
		    NodeList = a.childNodes.constructor;

		Document.prototype.querySelector = Element.prototype.querySelector = function (selector) {
			return addNwmatcher(this.ownerDocument || this).first(selector, this);
		};

		Document.prototype.querySelectorAll = Element.prototype.querySelectorAll = function (selector) {
			return addNwmatcher(this.ownerDocument || this).select(selector, this);
		};

		/**
   * nwwatcher has unexpected result with namespace on nodeName
   */
		var _createElementNS = Document.prototype.createElementNS;
		Document.prototype.createElementNS = function () {
			var el = _createElementNS.apply(this, arguments);
			el.tagName = el.nodeName = el.localName;
			return el;
		};

		Object.defineProperty(Element.prototype, "outerHTML", {
			get: function get() {
				return new xmldom.XMLSerializer().serializeToString(this);
			}
		});

		return [parse, Document, Element, NodeList, false];
	}(require('xmldom'))));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy90b29sLmpzIl0sIm5hbWVzIjpbImlzTm9kZSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImdsb2JhbCIsInByb2Nlc3MiLCJlIiwibWFrZVRvb2wiLCJ4bWxQYXJzZXIiLCJEb2N1bWVudCIsIk5vZGUiLCJOb2RlTGlzdCIsInNjb3BhYmxlIiwiJHRvb2wiLCJwYXJzZVhNTCIsImV4dGVuZCIsImFzc2lnbiIsImlzRnVuY3Rpb24iLCJhIiwiaXNBcnJheSIsIkFycmF5IiwiZWFjaCIsImYiLCJjdHgiLCJmb3JFYWNoIiwia2V5cyIsImsiLCJtYXAiLCJ0b0FycmF5IiwiYXJncyIsImkiLCJsZW4iLCJsZW5ndGgiLCJwdXNoIiwiZGlyZWN0Q2hpbGRTZWxlY3RvciIsImlkIiwiJCIsInNlbGVjdG9yIiwidGVzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzcGxpdCIsInRyaW0iLCJjaGFyQXQiLCJqb2luIiwic3Vic3RyaW5nIiwibm9kZXMiLCIkMSIsInF1ZXJ5U2VsZWN0b3IiLCJhdHRyIiwibmFtZSIsInZhbHVlIiwiYXJndW1lbnRzIiwiYXR0cmlidXRlcyIsImdldE5hbWVkSXRlbSIsInVuZGVmaW5lZCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInVwdHJpbSIsInBhcmVudCIsImNoaWxkTm9kZXMiLCJhc0FycmF5IiwibyIsIndpbmRvdyIsInBhcnNlciIsIngiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJ4bWxEb2MiLCJBY3RpdmVYT2JqZWN0IiwiYXN5bmMiLCJsb2FkWE1MIiwic3VwcG9ydFNjb3BlU2VsZWN0b3IiLCJkb2N1bWVudCIsImJvZHkiLCJFbGVtZW50IiwieG1sZG9tIiwiRE9NSW1wbGVtZW50YXRpb24iLCJud21hdGNoZXIiLCJyZXF1aXJlIiwicGFyc2UiLCJhZGROd21hdGNoZXIiLCJfbndtYXRjaGVyIiwiY29uZmlndXJlIiwiVU5JUVVFX0lEIiwiY29uc3RydWN0b3IiLCJkb2N1bWVudEVsZW1lbnQiLCJvd25lckRvY3VtZW50IiwiZmlyc3QiLCJzZWxlY3QiLCJfY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRWxlbWVudE5TIiwiZWwiLCJhcHBseSIsInRhZ05hbWUiLCJub2RlTmFtZSIsImxvY2FsTmFtZSIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFJQSxTQUFPLEtBQVg7QUFDQSxJQUFJO0FBQ0hBLFVBQVNDLE9BQU9DLFNBQVAsQ0FBaUJDLFFBQWpCLENBQTBCQyxJQUExQixDQUErQkMsT0FBT0MsT0FBdEMsTUFBbUQsa0JBQTVEO0FBQ0EsQ0FGRCxDQUVFLE9BQU1DLENBQU4sRUFBUyxDQUVWOztBQUdELFNBQVNDLFFBQVQsQ0FBa0JDLFNBQWxCLEVBQTZCQyxRQUE3QixFQUF1Q0MsSUFBdkMsRUFBNkNDLFFBQTdDLEVBQXVEQyxRQUF2RCxFQUFnRTtBQUMvRCxLQUFJQyxRQUFNO0FBQ1RkLGdCQURTO0FBRVRlLFlBQVVOLFNBRkQ7QUFHVE8sVUFBUWYsT0FBT2dCLE1BSE47QUFJVEMsY0FBWSxvQkFBU0MsQ0FBVCxFQUFXO0FBQ3RCLFVBQU8sT0FBT0EsQ0FBUCxLQUFZLFVBQW5CO0FBQ0EsR0FOUTtBQU9UQyxXQUFTLGlCQUFTRCxDQUFULEVBQVc7QUFDbkIsVUFBT0UsTUFBTUQsT0FBTixDQUFjRCxDQUFkLENBQVA7QUFDQSxHQVRRO0FBVVRHLFFBQU0sY0FBU0gsQ0FBVCxFQUFXSSxDQUFYLEVBQWFDLEdBQWIsRUFBaUI7QUFDdEIsT0FBR0gsTUFBTUQsT0FBTixDQUFjRCxDQUFkLENBQUgsRUFBb0I7QUFDbkJBLE1BQUVNLE9BQUYsQ0FBVUYsQ0FBVixFQUFZQyxHQUFaO0FBQ0EsSUFGRCxNQUVNLElBQUcsUUFBT0wsQ0FBUCx5Q0FBT0EsQ0FBUCxPQUFZLFFBQWYsRUFB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LFdBQVNSLFNBQVQsQ0FBbUI0RixlQUFuQixHQUFtQyxZQUFVO0FBQzVDLE9BQUlDLEtBQUdGLGlCQUFpQkcsS0FBakIsQ0FBdUIsSUFBdkIsRUFBNEI1QyxTQUE1QixDQUFQO0FBQ0EyQyxNQUFHRSxPQUFILEdBQVdGLEdBQUdHLFFBQUgsR0FBWUgsR0FBR0ksU0FBMUI7QUFDQSxVQUFPSixFQUFQO0FBQ0EsR0FKRDs7QUFNQTlGLFNBQU9tRyxjQUFQLENBQXNCdEIsUUFBUTVFLFNBQTlCLEVBQXdDLFdBQXhDLEVBQXFEO0FBQ3BEbUcsUUFBSyxlQUFVO0FBQ2QsV0FBTyxJQUFJdEIsT0FBT3VCLGFBQVgsR0FBMkJDLGlCQUEzQixDQUE2QyxJQUE3QyxDQUFQO0FBQ0E7QUFIbUQsR0FBckQ7O0FBT0EsU0FBTyxDQUFDcEIsS0FBRCxFQUFRekUsUUFBUixFQUFrQm9FLE9BQWxCLEVBQTJCbEUsUUFBM0IsRUFBcUMsS0FBckMsQ0FBUDtBQUNBLEVBakR3QixDQWlEdEJzRSxRQUFRLFFBQVIsQ0FqRHNCLENBQVosRUFBYjtBQWtEQSIsImZpbGUiOiJ0b29sLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGlzTm9kZT1mYWxzZVxudHJ5IHtcblx0aXNOb2RlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nXG59IGNhdGNoKGUpIHtcblxufVxuXG5cbmZ1bmN0aW9uIG1ha2VUb29sKHhtbFBhcnNlciwgRG9jdW1lbnQsIE5vZGUsIE5vZGVMaXN0LCBzY29wYWJsZSl7XG5cdHZhciAkdG9vbD17XG5cdFx0aXNOb2RlLFxuXHRcdHBhcnNlWE1MOiB4bWxQYXJzZXIsXG5cdFx0ZXh0ZW5kOiBPYmplY3QuYXNzaWduLFxuXHRcdGlzRnVuY3Rpb246IGZ1bmN0aW9uKGEpe1xuXHRcdFx0cmV0dXJuIHR5cGVvZiBhID09PSdmdW5jdGlvbidcblx0XHR9LFxuXHRcdGlzQXJyYXk6IGZ1bmN0aW9uKGEpe1xuXHRcdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoYSlcblx0XHR9LFxuXHRcdGVhY2g6IGZ1bmN0aW9uKGEsZixjdHgpe1xuXHRcdFx0aWYoQXJyYXkuaXNBcnJheShhKSl7XG5cdFx0XHRcdGEuZm9yRWFjaChmLGN0eClcblx0XHRcdH1lbHNlIGlmKHR5cGVvZiBhID09PSdvYmplY3QnKXtcblx0XHRcdFx0T2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbihrKXtcblx0XHRcdFx0XHRmLmNhbGwoY3R4LGssYVtrXSlcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9LFxuXHRcdG1hcDogZnVuY3Rpb24oYSxmLGN0eCl7XG5cdFx0XHRyZXR1cm4gYS5tYXAoZixjdHgpXG5cdFx0fVxuXHR9O1xuXG5cdCR0b29sLmV4dGVuZCgkdG9vbCx7XG5cdFx0dG9BcnJheTogZnVuY3Rpb24oYXJncyl7XG5cdFx0XHR2YXIgYT1bXTtcblx0XHRcdGZvcih2YXIgaT0wLGxlbj1hcmdzLmxlbmd0aDtpPGxlbjtpKyspXG5cdFx0XHRcdGEucHVzaChhcmdzW2ldKVxuXHRcdFx0cmV0dXJuIGFcblx0XHR9XG5cdH0pXG5cblx0dmFyIGRpcmVjdENoaWxkU2VsZWN0b3I9LygoXnwsKVxccyo+KS8sIGlkPVwic3h4eFwiXG5cdCR0b29sLmV4dGVuZChOb2RlLnByb3RvdHlwZSx7XG5cdFx0JDogZnVuY3Rpb24oc2VsZWN0b3Ipe1xuXHRcdFx0aWYoIWRpcmVjdENoaWxkU2VsZWN0b3IudGVzdChzZWxlY3RvcikpXG5cdFx0XHRcdHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpXG5cdFx0XHRlbHNlIGlmKHNjb3BhYmxlKVxuXHRcdFx0XHRyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKGEpe1xuXHRcdFx0XHRcdFx0cmV0dXJuIGEudHJpbSgpLmNoYXJBdCgwKT09Jz4nID8gJzpzY29wZScrYSA6IGFcblx0XHRcdFx0XHR9KS5qb2luKCcsJykpXG5cdFx0XHRlbHNlIGlmKHRoaXMuaWQpe1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKGEpe1xuXHRcdFx0XHRcdFx0Ly9yZXR1cm4gICcjJyt0aGlzLmlkKygoYT1hLnRyaW0oKSkuY2hhckF0KDApPT0nPicgPyAnJyA6ICcgJykrYVxuXHRcdFx0XHRcdFx0cmV0dXJuIChhPWEudHJpbSgpKS5jaGFyQXQoMCk9PSc+JyA/IGEuc3Vic3RyaW5nKDEpIDogYVxuXHRcdFx0XHRcdH0sdGhpcykuam9pbignLCcpKVxuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdHRoaXMuaWQ9aWRcblx0XHRcdFx0dmFyIG5vZGVzPXRoaXMucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvci5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihhKXtcblx0XHRcdFx0XHRcdC8vSUUgY2FuJ3QgZmluZCAnI3h4JywgQHRvZG86IGZpeCBpdCBsYXRlclxuXHRcdFx0XHRcdFx0Ly9yZXR1cm4gICcjJyt0aGlzLmlkKygoYT1hLnRyaW0oKSkuY2hhckF0KDApPT0nPicgPyAnJyA6ICcgJykrYVxuXHRcdFx0XHRcdFx0cmV0dXJuIChhPWEudHJpbSgpKS5jaGFyQXQoMCk9PSc+JyA/IGEuc3Vic3RyaW5nKDEpIDogYVxuXHRcdFx0XHRcdH0sdGhpcykuam9pbignLCcpKVxuXHRcdFx0XHRkZWxldGUgdGhpcy5pZFxuXHRcdFx0XHRyZXR1cm4gbm9kZXNcblx0XHRcdH1cblx0XHR9LFxuXHRcdCQxOmZ1bmN0aW9uKHNlbGVjdG9yKXtcblx0XHRcdGlmKCFkaXJlY3RDaGlsZFNlbGVjdG9yLnRlc3Qoc2VsZWN0b3IpKVxuXHRcdFx0XHRyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuXHRcdFx0ZWxzZSBpZihzY29wYWJsZSlcblx0XHRcdFx0cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihzZWxlY3Rvci5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihhKXtcblx0XHRcdFx0XHRcdHJldHVybiAoYT1hLnRyaW0oKSkuY2hhckF0KDApPT0nPicgPyAnOnNjb3BlJythIDogYVxuXHRcdFx0XHRcdH0pLmpvaW4oJywnKSlcblx0XHRcdGVsc2UgaWYodGhpcy5pZCl7XG5cdFx0XHRcdHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3Iuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oYSl7XG5cdFx0XHRcdFx0XHQvL3JldHVybiAgJyMnK3RoaXMuaWQrKChhPWEudHJpbSgpKS5jaGFyQXQoMCk9PSc+JyA/ICcnIDogJyAnKSthXG5cdFx0XHRcdFx0XHRyZXR1cm4gKGE9YS50cmltKCkpLmNoYXJBdCgwKT09Jz4nID8gYS5zdWJzdHJpbmcoMSkgOiBhXG5cdFx0XHRcdFx0fSx0aGlzKS5qb2luKCcsJykpXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0dGhpcy5pZD1pZFxuXHRcdFx0XHR2YXIgbm9kZXM9dGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKGEpe1xuXHRcdFx0XHRcdFx0Ly9yZXR1cm4gICcjJyt0aGlzLmlkKygoYT1hLnRyaW0oKSkuY2hhckF0KDApPT0nPicgPyAnJyA6ICcgJykrYVxuXHRcdFx0XHRcdFx0cmV0dXJuIChhPWEudHJpbSgpKS5jaGFyQXQoMCk9PSc+JyA/IGEuc3Vic3RyaW5nKDEpIDogYVxuXHRcdFx0XHRcdH0sdGhpcykuam9pbignLCcpKVxuXHRcdFx0XHRkZWxldGUgdGhpcy5pZFxuXHRcdFx0XHRyZXR1cm4gbm9kZXNcblx0XHRcdH1cblx0XHR9LFxuXHRcdGF0dHI6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKXtcblx0XHRcdGlmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe1xuXHRcdFx0XHR2YXIgYXR0cj10aGlzLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKG5hbWUpXG5cdFx0XHRcdHJldHVybiBhdHRyID8gYXR0ci52YWx1ZSA6IHVuZGVmaW5lZFxuXHRcdFx0fWVsc2UgaWYodmFsdWU9PW51bGwpXG5cdFx0XHRcdHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpXG5cdFx0XHRlbHNlXG5cdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsdmFsdWUpXG5cdFx0fSxcblx0XHRyZW1vdmU6IE5vZGUucHJvdG90eXBlLnJlbW92ZSB8fCBmdW5jdGlvbigpe1xuXHRcdFx0dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpXG5cdFx0fSxcblx0XHR1cHRyaW06IGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgcGFyZW50PXRoaXMucGFyZW50Tm9kZVxuXHRcdFx0dGhpcy5yZW1vdmUoKVxuXHRcdFx0aWYocGFyZW50LmNoaWxkTm9kZXMubGVuZ3RoPT0wKVxuXHRcdFx0XHRwYXJlbnQudXB0cmltKClcblx0XHR9XG5cdH0pXG5cblx0JHRvb2wuZXh0ZW5kKE5vZGVMaXN0LnByb3RvdHlwZSx7XG5cdFx0YXNBcnJheTogZnVuY3Rpb24obyl7XG5cdFx0XHRvPW98fFtdXG5cdFx0XHRmb3IodmFyIGk9MCxsZW49dGhpcy5sZW5ndGg7aTxsZW47aSsrKVxuXHRcdFx0XHRvLnB1c2godGhpc1tpXSlcblx0XHRcdHJldHVybiBvXG5cdFx0fSxcblx0XHRmb3JFYWNoOiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCxcblx0XHRtYXA6IEFycmF5LnByb3RvdHlwZS5tYXBcblx0fSlcblxuXHRyZXR1cm4gJHRvb2xcbn1cblxuXG5pZighaXNOb2RlKXtcblx0d2luZG93LiR0b29sPW1ha2VUb29sKC4uLihmdW5jdGlvbigpe1xuXHQgICAgZnVuY3Rpb24gcGFyc2VyKHgpe1xuXHQgICAgICAgIHg9eC50cmltKClcblx0ICAgICAgICBpZih0eXBlb2YoRE9NUGFyc2VyKSE9J3VuZGVmaW5lZCcpXG5cdCAgICAgICAgICAgIHJldHVybiAoIG5ldyBET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyh4LCBcInRleHQveG1sXCIpO1xuXG5cdCAgICAgICAgdmFyIHhtbERvYyA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTERPTVwiKTtcblx0ICAgICAgICB4bWxEb2MuYXN5bmMgPSBcImZhbHNlXCI7XG5cdCAgICAgICAgeG1sRG9jLmxvYWRYTUwoeCk7XG5cdCAgICAgICAgcmV0dXJuIHhtbERvYztcblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gc3VwcG9ydFNjb3BlU2VsZWN0b3IoKXtcblx0ICAgICAgICB0cnl7XG5cdCAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJzpzY29wZT4qJykubGVuZ3RoIT0wXG5cdCAgICAgICAgfWNhdGNoKGUpe1xuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBkb2N1bWVudC4kMT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yXG5cdCAgICBkb2N1bWVudC4kPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGxcblx0ICAgIHJldHVybiBbcGFyc2VyLCBEb2N1bWVudCwgRWxlbWVudCwgTm9kZUxpc3QsIHN1cHBvcnRTY29wZVNlbGVjdG9yKCldXG5cdH0pKCkpXG59ZWxzZXtcblx0Z2xvYmFsLiR0b29sPW1ha2VUb29sKC4uLihmdW5jdGlvbih4bWxkb20pe1xuXHRcdHZhciBET01QYXJzZXI9eG1sZG9tLkRPTVBhcnNlcixcblx0XHRcdERPTUltcGxlbWVudGF0aW9uPXhtbGRvbS5ET01JbXBsZW1lbnRhdGlvbjtcblxuXHRcdHZhciBud21hdGNoZXIgPSByZXF1aXJlKFwibndtYXRjaGVyXCIpO1xuXG5cdFx0ZnVuY3Rpb24gcGFyc2UoeCl7XG5cdFx0XHRyZXR1cm4gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh4LCBcInRleHQveG1sXCIpXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYWRkTndtYXRjaGVyKGRvY3VtZW50KSB7XG5cdFx0XHRpZiAoIWRvY3VtZW50Ll9ud21hdGNoZXIpIHtcblx0XHRcdFx0ZG9jdW1lbnQuX253bWF0Y2hlciA9IG53bWF0Y2hlcih7IGRvY3VtZW50OiBkb2N1bWVudCB9KTtcblx0XHRcdFx0ZG9jdW1lbnQuX253bWF0Y2hlci5jb25maWd1cmUoeyBVTklRVUVfSUQ6IGZhbHNlIH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRvY3VtZW50Ll9ud21hdGNoZXI7XG5cdFx0fVxuXG5cdFx0dmFyIGE9cGFyc2UoJzxhPjwvYT4nKSxcblx0XHRcdERvY3VtZW50PWEuY29uc3RydWN0b3IsXG5cdFx0XHRFbGVtZW50PWEuZG9jdW1lbnRFbGVtZW50LmNvbnN0cnVjdG9yLFxuXHRcdFx0Tm9kZUxpc3Q9YS5jaGlsZE5vZGVzLmNvbnN0cnVjdG9yXG5cblx0XHREb2N1bWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3Rvcj1FbGVtZW50LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yPWZ1bmN0aW9uKHNlbGVjdG9yKXtcblx0XHRcdHJldHVybiBhZGROd21hdGNoZXIodGhpcy5vd25lckRvY3VtZW50fHx0aGlzKS5maXJzdChzZWxlY3RvciwgdGhpcyk7XG5cdFx0fVxuXG5cdFx0RG9jdW1lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGw9RWxlbWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3RvckFsbD1mdW5jdGlvbihzZWxlY3Rvcil7XG5cdFx0XHRyZXR1cm4gYWRkTndtYXRjaGVyKHRoaXMub3duZXJEb2N1bWVudHx8dGhpcykuc2VsZWN0KHNlbGVjdG9yLCB0aGlzKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBud3dhdGNoZXIgaGFzIHVuZXhwZWN0ZWQgcmVzdWx0IHdpdGggbmFtZXNwYWNlIG9uIG5vZGVOYW1lXG5cdFx0ICovXG5cdFx0dmFyIF9jcmVhdGVFbGVtZW50TlM9RG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnROU1xuXHRcdERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50TlM9ZnVuY3Rpb24oKXtcblx0XHRcdHZhciBlbD1fY3JlYXRlRWxlbWVudE5TLmFwcGx5KHRoaXMsYXJndW1lbnRzKVxuXHRcdFx0ZWwudGFnTmFtZT1lbC5ub2RlTmFtZT1lbC5sb2NhbE5hbWVcblx0XHRcdHJldHVybiBlbFxuXHRcdH1cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSxcIm91dGVySFRNTFwiLCB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHJldHVybiBuZXcgeG1sZG9tLlhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyh0aGlzKVxuXHRcdFx0fVxuXHRcdH0pXG5cblxuXHRcdHJldHVybiBbcGFyc2UsIERvY3VtZW50LCBFbGVtZW50LCBOb2RlTGlzdCwgZmFsc2VdXG5cdH0pKHJlcXVpcmUoJ3htbGRvbScpKSlcbn1cbiJdfQ==